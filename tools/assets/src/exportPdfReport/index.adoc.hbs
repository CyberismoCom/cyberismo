= {{title}}
{{name}}
:doctype: book
:toc: macro
:numbered:
:imagesdir: images
:revnumber: {{version}}
:revdate: {{date}}
:revremark: {{revremark}}
:!chapter-signifier:
:source-highlighter: rouge
:toclevels: 5
+
toc::[]
{{#each results}}
  {{#include}}
     "cardKey": "{{this.key}}",
     "levelOffset": "{{this.levelOffset}}",
     "title": "only"
  {{/include}}
[cols="1,4",frame=none,grid=none]
|===
| Card key | {{this.key}}
| Card type | {{#if this.cardTypeDisplayName}}{{this.cardTypeDisplayName}}{{else}}{{this.cardType}}{{/if}}
| Last modified | {{this.lastUpdated}}
{{#if this.labels}}
| Labels | {{#each this.labels}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
{{/if}}
{{#each this.fields}}
| {{fieldDisplayName}} | {{formatValue value}}
{{/each}}
|===
{empty} +
{{#if this.links}}
[discrete]  
==== Linked cards

[cols="1,4",frame=none,grid=none]
|===
{{#each this.links}}
| {{displayName}} | xref:{{this.key}}[{{this.title}}]{{#if this.linkDescription}} - {{this.linkDescription}}{{/if}}
{{/each}}
|===
{empty} +
{{/if}}
{{#if this.notifications}}
[discrete]  
==== Notifications

[cols="1,2,3",options="header",frame=none,grid=rows]
|===
| Category | Title | Message
{{#each this.notifications}}
| {{category}} | {{title}} | {{message}}
{{/each}}
|===
{empty} +
{{/if}}
{{#if this.policyChecks.successes}}
[discrete]  
==== Passed policy checks

[cols="1,3",options="header",frame=none,grid=rows]
|===
| Category | Title
{{#each this.policyChecks.successes}}
| {{category}} | {{title}}
{{/each}}
|===
{empty} +
{{/if}}
{{#if this.policyChecks.failures}}
[discrete]  
==== Failed policy checks

[cols="1,2,3",options="header",frame=none,grid=rows]
|===
| Category | Title | Details
{{#each this.policyChecks.failures}}
| {{category}} | {{title}} | {{errorMessage}}{{#if fieldName}} ({{fieldName}}){{/if}}
{{/each}}
|===
{empty} +
{{/if}}
{{#include}}
    "cardKey": "{{this.key}}",
    "levelOffset": "{{this.levelOffset}}",
    "title": "exclude",
    "pageTitles": "discrete"
{{/include}}
{{/each}}
